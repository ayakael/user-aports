# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=alpine-zsh-config
pkgver=0.2.0
pkgrel=0
pkgdesc="A sensible default configuration for Zsh"
url="https://github.com/jirutka/alpine-zsh-config"
arch="noarch"
license="MIT"
depends="tty-copy zsh"
source="https://github.com/jirutka/alpine-zsh-config/archive/v$pkgver/alpine-zsh-config-$pkgver.tar.gz
	zshenv
	zshrc
	"

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install

	install -D -m644 /dev/stdin "$pkgdir"/usr/share/zsh/scripts/newuser <<-EOF
	# The purpose of this empty file is to disable that obstructive newuser setup
	# wizard (zsh/newuser module). It has been installed by $pkgname package.
	EOF

	# Added for compatibility with zsh in Alpine v3.15.
	install -D -m644 -t "$pkgdir"/etc/zsh/ \
		"$srcdir"/zshenv \
		"$srcdir"/zshrc
}

sha512sums="
b71db06119c49d6ecaf08f951c89a414b9f15806ab4a4f3b25a7cbe7c5176aaea417bd8127fb66160902ded48081f7b841d02cefa9d745871e03223528383f1b  alpine-zsh-config-0.2.0.tar.gz
1b584f175a4a5b0a772a72cae1ca606e04d461e9a5fb276eed1bca51ecc4300582d152b612ee7b1e485044bb1639c810ccdf279ef985ee323b3d3712db387f6c  zshenv
bd86ad6c6b10793ea405580f185b898c50e2bac3c5a60f91ad739be02a3b94d5943ab400ecc1147dccd4a5d196baa37a17f071a37a7359869cd393385f363c63  zshrc
"
