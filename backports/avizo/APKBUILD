# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=avizo
pkgver=1.0_git20220109
_gitrev=ca9b2c9189e876ffab3ae91b3e1eb7f02894f460
pkgrel=0
pkgdesc="A neat notification daemon"
url="https://github.com/misterdanb/avizo"
arch="all"
license="GPL-3.0"
makedepends="
	gobject-introspection-dev
	gtk+3.0-dev
	gtk-layer-shell-dev
	meson
	vala
	"
source="https://github.com/misterdanb/avizo/archive/$_gitrev/$pkgname-$_gitrev.tar.gz
	unbundle-images.patch
	"
subpackages="$pkgname-scripts::noarch"
builddir="$srcdir/$pkgname-$_gitrev"
options="!check"  # no tests provided

build() {
	abuild-meson . output
	meson compile ${JOBS:+-j ${JOBS}} -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

scripts() {
	pkgdesc="Scripts to control sound volume and display backlight integrated with Avizo"
	depends="$pkgname brightnessctl pamixer"

	amove usr/bin/lightctl
	amove usr/bin/volumectl
}

sha512sums="
d1dba6dbfeaf25caef7255188abd16ad70b04861dd913a697039049aa05616838fbd8a26aed5b43c2a27e83352bd379187bcda643dd1182ba1971439f5747b85  avizo-ca9b2c9189e876ffab3ae91b3e1eb7f02894f460.tar.gz
a42195eeb15e2ca2596c28904b6e23d6956a270939ffc972190756220e77be93a9006faacba0340d45dbb26e29fcdb622b89e8ea4bae341957262d6320eed24c  unbundle-images.patch
"
