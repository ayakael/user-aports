# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=kea-hook-userchk-ldap
pkgver=0_git20200131
_gitrev=91a35dacd42330853f5f595bd1e359c95c6d0cd8
pkgrel=2
pkgdesc="Kea DHCP hook for checking user access in LDAP"
url="https://gitlab.fit.cvut.cz/spaceji3/kea-hook-userchk-ldap"
arch="all"
license="MPL-2.0"
makedepends="autoconf automake kea-dev libtool openldap-dev boost-dev log4cplus-dev"
source="https://gitlab.fit.cvut.cz/spaceji3/$pkgname/-/archive/$_gitrev/$pkgname-$_gitrev.tar.gz"
builddir="$srcdir/$pkgname-$_gitrev"
options="!check"  # no tests provided

prepare() {
	default_prepare

	libtoolize
	aclocal
	autoheader
	autoconf
	automake --add-missing
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--enable-generate-messages \
		--disable-static
	make
}

package() {
	make install DESTDIR="$pkgdir"
}

sha512sums="a24925a2918aa9db81c655791379e37adcf311d12d689dd4df80408268413c586f8c4c7374a887df057eae5b14a541259e01a273df5d4a4b700b8db2e159d930  kea-hook-userchk-ldap-91a35dacd42330853f5f595bd1e359c95c6d0cd8.tar.gz"
