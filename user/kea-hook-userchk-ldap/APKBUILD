# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=kea-hook-userchk-ldap
pkgver=0_git20200124
_gitrev=1ee353f01d85d173a26f12dac2d15705c56e84a7
pkgrel=0
pkgdesc="Kea DHCP hook for checking user access in LDAP"
url="https://gitlab.fit.cvut.cz/spaceji3/kea-hook-userchk-ldap"
arch="all"
license="MPL-2.0"
makedepends="autoconf automake kea-dev libtool openldap-dev boost-dev log4cplus-dev"
source="https://gitlab.fit.cvut.cz/spaceji3/$pkgname/-/archive/$_gitrev/$pkgname-$_gitrev.tar.gz"
builddir="$srcdir/$pkgname-$_gitrev"
options="!check"  # no tests provided

prepare() {
	default_prepare

	libtoolize
	aclocal
	autoheader
	autoconf
	automake --add-missing
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--enable-generate-messages \
		--disable-static
	make
}

package() {
	make install DESTDIR="$pkgdir"
}

sha512sums="d0c92c1642d85a9d11062522fa3f32fa0f124eb95e36eda697076153c7de37047d4d7d8d3bea8574ae441e5d7436a6e75eaa64b5e6d8e1d03985e915e3e4593e  kea-hook-userchk-ldap-1ee353f01d85d173a26f12dac2d15705c56e84a7.tar.gz"
