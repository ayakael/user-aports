# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=kea-hook-userchk-ldap
pkgver=0_git20200130
_gitrev=d7649b803fcd02300223426a591c1da3bb9298d3
pkgrel=0
pkgdesc="Kea DHCP hook for checking user access in LDAP"
url="https://gitlab.fit.cvut.cz/spaceji3/kea-hook-userchk-ldap"
arch="all"
license="MPL-2.0"
makedepends="autoconf automake kea-dev libtool openldap-dev boost-dev log4cplus-dev"
source="https://gitlab.fit.cvut.cz/spaceji3/$pkgname/-/archive/$_gitrev/$pkgname-$_gitrev.tar.gz"
builddir="$srcdir/$pkgname-$_gitrev"
options="!check"  # no tests provided

prepare() {
	default_prepare

	libtoolize
	aclocal
	autoheader
	autoconf
	automake --add-missing
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--enable-generate-messages \
		--disable-static
	make
}

package() {
	make install DESTDIR="$pkgdir"
}

sha512sums="13f0edbda9bdad6f1186b1c0b1c69cde33a53444bc09a1fbbab3c88749a899d613e3c5a1c48395ef7585b7636b3453361cc3d10b34d847865945575229713c5b  kea-hook-userchk-ldap-d7649b803fcd02300223426a591c1da3bb9298d3.tar.gz"
