# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=kea-hook-userchk-ldap
pkgver=0_git20200131
_gitrev=c5ef3ee8b6e915a0466ce9a9f51dbfbaed4898a7
pkgrel=0
pkgdesc="Kea DHCP hook for checking user access in LDAP"
url="https://gitlab.fit.cvut.cz/spaceji3/kea-hook-userchk-ldap"
arch="all"
license="MPL-2.0"
makedepends="autoconf automake kea-dev libtool openldap-dev boost-dev log4cplus-dev"
source="https://gitlab.fit.cvut.cz/spaceji3/$pkgname/-/archive/$_gitrev/$pkgname-$_gitrev.tar.gz"
builddir="$srcdir/$pkgname-$_gitrev"
options="!check"  # no tests provided

prepare() {
	default_prepare

	libtoolize
	aclocal
	autoheader
	autoconf
	automake --add-missing
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--enable-generate-messages \
		--disable-static
	make
}

package() {
	make install DESTDIR="$pkgdir"
}

sha512sums="2da8f3a6f84bfee72016942e2eb3a186c8031f74873a17bbfb96a14fda0def2a14c059ed1dfa7e868c69797c543367dec6c1beac3d31156001f47f4048e516ec  kea-hook-userchk-ldap-c5ef3ee8b6e915a0466ce9a9f51dbfbaed4898a7.tar.gz"
