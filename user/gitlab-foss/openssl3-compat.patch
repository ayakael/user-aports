diff --git a/Gemfile.orig b/Gemfile
index 9e4fd6c..c54e0d0 100644
--- a/Gemfile.orig
+++ b/Gemfile
@@ -19,7 +19,7 @@ gem 'bootsnap', '~> 1.16.0', require: false
 
 # Pin openssl to match the version bundled with our supported Rubies.
 # See https://stdgems.org/openssl/#gem-version.
-gem 'openssl', '2.2.2'
+gem 'openssl', '~> 3.0'
 # This gem was originally bundled with Ruby 2.7, but is unbundled as of Ruby 3.
 # Since the latest version caused problems with GitLab, we pin this to an older
 # version for now.
@@ -72,9 +72,7 @@ gem 'omniauth-saml', '~> 2.0.0'
 gem 'omniauth-twitter', '~> 1.4'
 gem 'omniauth_crowd', '~> 2.4.0', path: 'vendor/gems/omniauth_crowd' # See vendor/gems/omniauth_crowd/README.md
 gem 'omniauth_openid_connect', '~> 0.6.1'
-# Locked until Ruby 3.0 upgrade since upgrading will pull in an updated net-smtp gem.
-# See https://docs.gitlab.com/ee/development/emails.html#rationale.
-gem 'openid_connect', '= 1.3.0'
+gem 'openid_connect', '~> 1.3.1'
 gem 'omniauth-salesforce', '~> 1.0.5', path: 'vendor/gems/omniauth-salesforce' # See gem README.md
 gem 'omniauth-atlassian-oauth2', '~> 0.2.0'
 gem 'rack-oauth2', '~> 1.21.3'
@@ -544,10 +542,7 @@ gem 'retriable', '~> 3.1.2'
 # LRU cache
 gem 'lru_redux'
 
-# Locked as long as quoted-printable encoding issues are not resolved
-# Monkey-patched in `config/initializers/mail_encoding_patch.rb`
-# See https://gitlab.com/gitlab-org/gitlab/issues/197386
-gem 'mail', '= 2.7.1'
+gem 'mail', '~> 2.8'
 gem 'mail-smtp_pool', '~> 0.1.0', path: 'vendor/gems/mail-smtp_pool', require: false
 
 gem 'microsoft_graph_mailer', '~> 0.1.0', path: 'vendor/gems/microsoft_graph_mailer'
@@ -593,3 +588,6 @@ gem 'app_store_connect'
 
 # For phone verification
 gem 'telesignenterprise', '~> 2.2'
+
+# Temp fix for ruby3.1
+gem 'psych', '< 4'
diff --git a/Gemfile.lock.orig b/Gemfile.lock
index 2e548c4..c009e81 100644
--- a/Gemfile.lock.orig
+++ b/Gemfile.lock
@@ -198,7 +198,7 @@ GEM
     autoprefixer-rails (10.2.5.1)
       execjs (> 0)
     awesome_print (1.9.2)
-    awrence (1.1.1)
+    awrence (1.2.1)
     aws-eventstream (1.2.0)
     aws-partitions (1.703.0)
     aws-sdk-cloudformation (1.41.0)
@@ -242,7 +242,7 @@ GEM
       coderay (>= 1.0.0)
       erubi (>= 1.0.0)
       rack (>= 0.9.0)
-    bindata (2.4.11)
+    bindata (2.4.15)
     binding_ninja (0.2.3)
     bootsnap (1.16.0)
       msgpack (~> 1.2)
@@ -294,13 +294,13 @@ GEM
     coderay (1.1.3)
     colored2 (3.1.2)
     commonmarker (0.23.6)
-    concurrent-ruby (1.2.0)
+    concurrent-ruby (1.2.2)
     connection_pool (2.3.0)
     cork (0.3.0)
       colored2 (~> 3.1)
-    cose (1.0.0)
+    cose (1.3.0)
       cbor (~> 0.5.9)
-      openssl-signature_algorithm (~> 0.4.0)
+      openssl-signature_algorithm (~> 1.0)
     countries (4.0.1)
       i18n_data (~> 0.13.0)
       sixarm_ruby_unaccent (~> 1.1)
@@ -330,6 +330,7 @@ GEM
       danger
       gitlab (~> 4.2, >= 4.2.0)
     database_cleaner (1.7.0)
+    date (3.3.3)
     dead_end (3.1.1)
     deckar01-task_list (2.3.2)
       html-pipeline
@@ -898,8 +899,11 @@ GEM
       zeitwerk (~> 2.5)
     lru_redux (1.1.0)
     lumberjack (1.2.7)
-    mail (2.7.1)
+    mail (2.8.1)
       mini_mime (>= 0.1.1)
+      net-imap
+      net-pop
+      net-smtp
     marcel (1.0.2)
     marginalia (1.11.1)
       actionpack (>= 5.2)
@@ -943,10 +947,19 @@ GEM
     nenv (0.3.0)
     net-http-persistent (4.0.1)
       connection_pool (~> 2.2)
+    net-imap (0.3.4)
+      date
+      net-protocol
     net-ldap (0.17.1)
     net-ntp (2.1.3)
+    net-pop (0.1.2)
+      net-protocol
+    net-protocol (0.2.1)
+      timeout
     net-scp (3.0.0)
       net-ssh (>= 2.6.5, < 7.0.0)
+    net-smtp (0.3.3)
+      net-protocol
     net-ssh (6.0.0)
     netrc (0.11.0)
     nio4r (2.5.8)
@@ -1029,19 +1042,20 @@ GEM
       omniauth (>= 1.9, < 3)
       openid_connect (~> 1.1)
     open4 (1.3.4)
-    openid_connect (1.3.0)
+    openid_connect (1.3.1)
       activemodel
       attr_required (>= 1.0.0)
       json-jwt (>= 1.5.0)
+      net-smtp
       rack-oauth2 (>= 1.6.1)
       swd (>= 1.0.0)
       tzinfo
       validate_email
       validate_url
       webfinger (>= 1.0.1)
-    openssl (2.2.2)
-      ipaddr
-    openssl-signature_algorithm (0.4.0)
+    openssl (3.0.2)
+    openssl-signature_algorithm (1.3.0)
+      openssl (> 2.0)
     opentracing (0.5.0)
     optimist (3.0.1)
     org-ruby (0.9.12)
@@ -1110,7 +1124,8 @@ GEM
       pry (>= 0.13.0)
       tty-markdown
       tty-prompt
-    public_suffix (5.0.0)
+    psych (3.3.4)
+    public_suffix (5.0.1)
     puma (5.6.5)
       nio4r (~> 2.0)
     puma_worker_killer (0.3.1)
@@ -1119,7 +1134,7 @@ GEM
     pyu-ruby-sasl (0.0.3.3)
     raabro (1.4.0)
     racc (1.6.2)
-    rack (2.2.6.2)
+    rack (2.2.6.3)
     rack-accept (0.4.5)
       rack (>= 0.4)
     rack-attack (6.6.1)
@@ -1335,7 +1350,6 @@ GEM
       addressable (>= 2.3.5)
       faraday (>= 0.17.3, < 3)
     sd_notify (0.1.1)
-    securecompare (1.0.0)
     seed-fu (2.3.7)
       activerecord (>= 3.1)
       activesupport (>= 3.1)
@@ -1466,15 +1480,17 @@ GEM
     thrift (0.16.0)
     tilt (2.0.11)
     timeliness (0.3.10)
+    timeout (0.3.2)
     timfel-krb5-auth (0.8.3)
     tins (1.31.1)
       sync
     toml-rb (2.2.0)
       citrus (~> 3.0, > 3.0)
     tomlrb (1.3.0)
-    tpm-key_attestation (0.9.0)
+    tpm-key_attestation (0.11.0)
       bindata (~> 2.4)
-      openssl-signature_algorithm (~> 0.4.0)
+      openssl (> 2.0, < 3.1)
+      openssl-signature_algorithm (~> 1.0)
     trailblazer-option (0.1.2)
     train-core (3.4.9)
       addressable (~> 2.5)
@@ -1547,19 +1563,19 @@ GEM
     warden (1.2.9)
       rack (>= 2.0.9)
     warning (1.3.0)
-    webauthn (2.3.0)
+    webauthn (2.5.2)
       android_key_attestation (~> 0.3.0)
       awrence (~> 1.1)
       bindata (~> 2.4)
       cbor (~> 0.5.9)
-      cose (~> 1.0)
-      openssl (~> 2.0)
+      cose (~> 1.1)
+      openssl (>= 2.2, < 3.1)
       safety_net_attestation (~> 0.4.0)
-      securecompare (~> 1.0)
-      tpm-key_attestation (~> 0.9.0)
-    webfinger (1.2.0)
+      tpm-key_attestation (~> 0.11.0)
+    webfinger (2.0.0)
       activesupport
-      httpclient (>= 2.4)
+      faraday (~> 1.7)
+      faraday_middleware (~> 1.1)
     webmock (3.9.1)
       addressable (>= 2.3.6)
       crack (>= 0.3.2)
@@ -1581,7 +1597,7 @@ GEM
       nokogiri (~> 1.8)
     yajl-ruby (1.4.3)
     yard (0.9.26)
-    zeitwerk (2.6.6)
+    zeitwerk (2.6.7)
 
 PLATFORMS
   ruby
@@ -1748,7 +1764,7 @@ DEPENDENCIES
   loofah (~> 2.19.1)
   lookbook (~> 1.5, >= 1.5.3)
   lru_redux
-  mail (= 2.7.1)
+  mail (~> 2.8)
   mail-smtp_pool (~> 0.1.0)!
   marginalia (~> 1.11.1)
   memory_profiler (~> 1.0)
@@ -1782,8 +1798,8 @@ DEPENDENCIES
   omniauth-twitter (~> 1.4)
   omniauth_crowd (~> 2.4.0)!
   omniauth_openid_connect (~> 0.6.1)
-  openid_connect (= 1.3.0)
-  openssl (= 2.2.2)
+  openid_connect (~> 1.3.1)
+  openssl (~> 3.0)
   org-ruby (~> 0.9.12)
   pact (~> 1.63)
   parallel (~> 1.19)
@@ -1797,6 +1813,7 @@ DEPENDENCIES
   pry-byebug
   pry-rails (~> 0.3.9)
   pry-shell (~> 0.6.1)
+  psych (< 4)
   puma (~> 5.6.5)
   puma_worker_killer (~> 0.3.1)
   rack (~> 2.2.6, >= 2.2.6.2)
@@ -1893,4 +1910,4 @@ DEPENDENCIES
   yajl-ruby (~> 1.4.3)
 
 BUNDLED WITH
-   2.4.6
+   2.3.26

